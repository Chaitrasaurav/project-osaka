"use strict";function init(){function t(t,e){$(".js-datepicker-container").each(function(a,o){var i=$.datepicker._getInst(o);i.drawMonth=i.selectedMonth=t,i.drawYear=i.selectedYear=e,$.datepicker._notifyChange(i),$.datepicker._adjustDate(o)})}propertyId=$("#propertyId").val(),property=$("#property").val(),locale=$("body").data("locale"),$.datepicker.regional[$("body").data("i18n")],$("input.js-datepicker").click(function(e){if($(".js-select-guest-container").hasClass("hidden")||$(".js-select-guest-container").addClass("hidden"),$(".js-datepicker-modal").removeClass("hidden"),$(".check-in").removeClass("js-is-invalid"),$(".check-out").removeClass("js-is-invalid"),$(e.target).hasClass("check-in"))if($(e.target).val()){a=$(e.target).val();t(new Date(a).getMonth(),new Date(a).getFullYear()),$(".check-out").removeClass("js-datepicker-highlight"),$(e.target).addClass("js-datepicker-highlight")}else $(e.target).addClass("js-datepicker-highlight"),$(".js-datepicker-container").datepicker("option","gotoCurrent",!0);else if($(e.target).hasClass("check-out"))if($(e.target).val()){a=$(e.target).val();t(new Date(a).getMonth(),new Date(a).getFullYear()),$(".check-in").addClass("js-datepicker-highlight")}else if($(".check-in").val().length){$(e.target).addClass("js-datepicker-highlight"),$(".check-in").removeClass("js-datepicker-highlight");var a=$(".check-in").val();t(new Date(a).getMonth(),new Date(a).getFullYear())}else $(".check-in").addClass("js-datepicker-highlight"),$(".js-datepicker-container").datepicker("option","gotoCurrent",!0)});var e=2;$(window).width()<768&&(e=1),$(".js-datepicker-container").datepicker({minDate:new Date(2018,1,1),numberOfMonths:e,beforeShowDay:function(t){var e=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#checkIn").val()),a=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#checkOut").val()),o="dp-highlight";return(e&&t.getTime()==e.getTime()||a&&t.getTime()==a.getTime())&&(o="dp-highlighted"),e&&!a&&t>e&&(o="dp-highlight-hover"),[!0,e&&(t.getTime()==e.getTime()||!a&&t>e||a&&t>=e&&t<=a)?o:""]},onSelect:function(t,e){var a=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#checkIn").val()),o=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#checkOut").val()),i=$.datepicker.parseDate($.datepicker._defaults.dateFormat,t);if(!a||o?($("#checkIn").val(t).removeClass("js-datepicker-highlight"),$("#checkIn").hasClass("js-is-invalid")&&$("#checkIn").removeClass("js-is-invalid"),$("#checkOut").val("").addClass("js-datepicker-highlight"),$(this).datepicker()):i<a?($("#checkIn").val(t),$("#checkIn").hasClass("js-is-invalid")&&$("#checkIn").removeClass("js-is-invalid"),$("#checkIn").hasClass("js-datepicker-highlight")&&($("#checkIn").removeClass("js-datepicker-highlight"),$("#checkOut").addClass("js-datepicker-highlight")),$(this).datepicker()):($("#checkIn").hasClass("js-datepicker-highlight")?($("#checkIn").val(t).removeClass("js-datepicker-highlight"),$("#checkOut").addClass("js-datepicker-highlight")):($("#checkOut").val(t).removeClass("js-datepicker-highlight"),$("#checkOut").hasClass("js-is-invalid")||$("#checkOut").removeClass("js-is-invalid"),$(".js-datepicker-modal").hasClass("hidden")||$(".js-datepicker-modal").addClass("hidden")),$(this).datepicker()),$("body").hasClass("ja_JP")){if($("#checkIn").val().length){s=new Date($("#checkIn").val());$("#checkIn").siblings('input[name="ciDateY"]').val(s.getFullYear()),$("#checkIn").siblings('input[name="ciDateM"]').val(s.getMonth()+1),$("#checkIn").siblings('input[name="ciDateD"]').val(s.getDate())}if($("#checkOut").val().length){var s=new Date($("#checkOut").val());$("#checkOut").siblings('input[name="coDateY"]').val(s.getFullYear()),$("#checkOut").siblings('input[name="coDateM"]').val(s.getMonth()+1),$("#checkOut").siblings('input[name="coDateD"]').val(s.getDate())}}if($("#checkIn").val()){var l=new Date($("#checkIn").val()).getDate();l=l<10?"0"+l:l,$(".js-date-arrival").removeClass("hidden").text(l)}else $(".js-date-arrival").removeClass("hidden").text("");if($("#checkOut").val()){var n=new Date($("#checkOut").val()).getDate();n=n<10?"0"+n:n,$(".js-date-departure").removeClass("hidden").text(n)}else $(".js-date-departure").removeClass("hidden").text("")}}),$(".js-close-datepicker").click(function(){$(".js-datepicker-modal").addClass("hidden")});var a=new Date,o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate(),s=(a.getFullYear(),new Date);s.setDate((new Date).getDate()+1);var l=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,n=s.getDate()<10?"0"+s.getDate()+1:s.getDate(),r=(s.getFullYear(),{propertyname:"Hotel Mystays Haneda",rooms:[{roomName:"Standard Semi Double S",price:"118.8000",roomIdBooking:"428264"},{roomName:"Standard Semi Double NS",price:"237.6000",roomIdBooking:"428265"},{roomName:"Standard Double S",price:"356.4000",roomIdBooking:"428266"},{roomName:"Standard Double NS",price:"475.2000",roomIdBooking:"428267"},{roomName:"Standard Queen S",price:"594.0000",roomIdBooking:"428268"},{roomName:"Standard Queen NS",price:"712.8000",roomIdBooking:"428269"},{roomName:"Standard Twin S",price:"831.6000",roomIdBooking:"428270"},{roomName:"Standard Twin NS",price:"950.4000",roomIdBooking:"428271"},{roomName:"Standard Hollywood Twin NS",price:"1069.2000",roomIdBooking:"428272"},{roomName:"Accessible Double NS",price:"1188.0000",roomIdBooking:"428273"},{roomName:"Deluxe Queen NS",price:"1306.8000",roomIdBooking:"428274"},{roomName:"Deluxe Twin NS",price:"1425.6000",roomIdBooking:"428275"},{roomName:"Superior Double Kitchenette NS",price:"1544.4000",roomIdBooking:"428276"},{roomName:"Superior Queen NS",price:"1663.2000",roomIdBooking:"428277"},{roomName:"Grand Deluxe Twin S",price:"1782.0000",roomIdBooking:"428278"},{roomName:"Grand Deluxe Twin NS",price:"1900.8000",roomIdBooking:"428279"}]});if(console.info(r),r.rooms.length){var c,d,h={lazyLoad:"ondemand",infinite:!1,speed:500,dots:!0,responsive:[{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,centerMode:!0,centerPadding:"30px"}}]},p=$(".js-accomodation"),g=r.rooms,u=g.length,m=3;new Date;$(window).width()<900&&$(window).width()>600?m=2:$(window).width()<600&&(m=1);for(var k=0;k<u;k++){c=Math.round(parseFloat(g[k].price));try{d=c.toLocaleString("ja-JP")}catch(t){d=c}p.append('<li data-room="'+g[k].roomIdBooking+'">\t\t\t\t\t<img src="../dist/images/room-image.png">\t\t\t\t\t<h3>'+g[k].roomName+'</h3>\t\t\t\t\t<p><span>Starting from:</span><span class="js-accomodation-price">Â¥ '+d+'</span><span>/night</span></p>\t\t\t\t\t<a href="#" class="js-book-now">Book Now</a>\t\t\t\t</li>')}h.slidesToShow=m,h.slidesToScroll=m,g.length<=m&&(h.dots=!1,h.arrows=!1),p.slick(h),p.find(".slick-arrow").appendTo(p.find(".slick-dots")),p.find(".slick-arrow").addClass("icon arrow")}}function getReviews(t,e){var a="https://api.trustyou.com/hotels/"+e+"/trust_score.html?embedded=true&lang=en&size=m";$.ajax({url:a,success:function(e){$(t).append($(e).find(".counter")),$(t).append($(e).find(".rating-units"))}})}var propertyId,property,locale;$(document).on("mouseover",".ui-datepicker-calendar td a",function(t){$(".check-out").hasClass("js-datepicker-highlight")&&($(this).parents(".ui-datepicker-group").prevAll().find("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),$(this).parents("tr").prevAll().find("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),$(this).parent("td").prevAll("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),$(this).parent("td.dp-highlight-hover").addClass("last-cell"),$(this).parent("td").nextAll("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"),$(this).parents("tr").nextAll().find("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"),$(this).parents(".ui-datepicker-group").nextAll().find("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"))}),$(".js-select-guest").on("click",function(t){$(".js-datepicker-modal").hasClass("hidden")||$(".js-datepicker-modal").addClass("hidden"),$(".js-select-guest-container").toggleClass("hidden"),$("html, body").animate({scrollTop:$(".js-select-guest").offset().top-100},1e3)}),$(".js-cancel-select-guest").on("click",function(){$(".js-select-guest-container").toggleClass("hidden"),$("html, body").animate({scrollTop:$("#mainForm").offset().top-100},1e3)}),$(".js-add-room").on("click",function(){var t=$(".js-room-list").find("li").length+1,e='<li class="js-room room clearfix" data-room="'+t+'">\t\t\t\t\t<div class="room-container clearfix">\t\t\t\t\t\t<p class="room__heading">'+miscellaneous.roomLabel+t+'</p>\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t<label class="room__label form__label">'+miscellaneous.adultLabel+'</label>\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t<select class="room__field form__field js-adult-count">\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t<option value="2" selected>2</option>\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t<label class="room__label form__label">'+miscellaneous.childrenLabel+'</label>\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t<select class="room__field form__field js-child-count">\t\t\t\t\t\t\t\t\t<option value="0">0</option>\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="room__delete">\t\t\t\t\t\t<a href="javascript:;" title="'+miscellaneous.deleteRoom+'" class="room__delete-btn js-delete-room"><i class="icon delete-icon"></i></a>\t\t\t\t\t</div>\t\t\t\t</li>';$(".js-room-list").append(e)}),$(".js-room-list").on("click",".js-delete-room",function(t){$(this).parents("li").remove()}),$(".js-room-list").on("change",".js-child-count",function(t){var e=$(this),a=e.val(),o=e.parents(".js-room").find(".js-child-age-list");o.empty();for(var i=0;i<a;i++){var s='<p class="room__heading">Ages</p>\t\t\t\t\t\t<div class="form__con js-child-age-ele">\t\t\t\t\t\t\t<label class="form__label">Child '+(i+1)+'</label>\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t<select class="form__field">\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t\t<option value="8">8</option>\t\t\t\t\t\t\t\t\t<option value="9">9</option>\t\t\t\t\t\t\t\t\t<option value="10">10</option>\t\t\t\t\t\t\t\t\t<option value="11">11</option>\t\t\t\t\t\t\t\t\t<option value="12">12</option>\t\t\t\t\t\t\t\t\t<option value="13">13</option>\t\t\t\t\t\t\t\t\t<option value="14">14</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>';o.append(s)}}),$(".js-confirm").on("click",function(){for(var t=$(".js-select-guest-container").find(".js-adult-count"),e=$(".js-select-guest-container").find(".js-child-count"),a=0,o=0,i=0;i<t.length;i++)a+=Number(t[i].value);for(i=0;i<e.length;i++)o+=Number(e[i].value);$(".js-select-guest").val(a+o),$(".js-total-adult").val(a),$(".js-total-children").val(o),$(".js-total-room").val($(".js-room").length),$(".js-select-guest-container").toggleClass("hidden"),$("html, body").animate({scrollTop:$("#mainForm").offset().top},1e3)}),$(".js-more-photos").on("click",function(t){t.preventDefault(),$(".first-image").trigger("click")}),$(".js-tabs-select").on("change",function(t){var e=$(this).val();$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$('ul.js-tabs li[data-tab="'+e+'"]').addClass("current"),$("#"+e).addClass("current"),$("#"+e).find(".js-tab-slider").slick("setPosition",0),$("#"+e).find(".js-tab-slider-inner").slick("setPosition",0)}),$("ul.js-tabs li").click(function(){var t=$(this).attr("data-tab");$("ul.js-tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(".js-tabs-select").val(t).trigger("change"),$(this).addClass("current"),$("#"+t).addClass("current"),$("#"+t).find(".js-tab-slider").slick("setPosition",0),$("#"+t).find(".js-tab-slider-inner").slick("setPosition",0)});var slickConfig={lazyLoad:"ondemand",infinite:!1,speed:500,responsive:[{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,centerMode:!0,centerPadding:"30px"}}]},noOfSlide=3;$(window).width()<900&&$(window).width()>600?noOfSlide=2:$(window).width()<600&&(noOfSlide=1);var createSlider=function(t){var e=$(t);e.length>1?e.map(function(t,e){slickConfig.dots=!0,slickConfig.arrows=!0,slickConfig.slidesToShow=noOfSlide,slickConfig.slidesToScroll=noOfSlide,$(e).find("li").length<=noOfSlide&&(slickConfig.dots=!1,slickConfig.arrows=!1),$(e).slick(slickConfig),$(e).find(".slick-arrow").appendTo($(e).find(".slick-dots")),$(e).find(".slick-arrow").addClass("icon arrow")}):(slickConfig.dots=!0,slickConfig.arrows=!0,slickConfig.slidesToShow=noOfSlide,slickConfig.slidesToScroll=noOfSlide,e.find("li").length<=noOfSlide&&(slickConfig.dots=!1,slickConfig.arrows=!1),e.slick(slickConfig),e.find(".slick-arrow").appendTo(e.find(".slick-dots")),e.find(".slick-arrow").addClass("icon arrow"))};createSlider(".js-tab-slider"),$(window).width()>600&&createSlider(".js-nearbuy"),$(".js-tab-slider-inner").slick({infinite:!1,speed:300,slidesToShow:1,dots:!0,dotsClass:"custom_paging",customPaging:function(t,e){return e+1+" of "+t.slideCount}}),$(".js-tab-slider-inner .slick-arrow").addClass("icon arrow"),$(".header_cta-dropdown").on("click",function(){$(".header_language").toggleClass("active")}),$(".js-header-link").on("click",function(t){var e=$(t.target).attr("href");$("html, body").animate({scrollTop:$(e).offset().top},1250)}),$(".js-main-form-btn").on("click",function(){var t=$(this).parents("form"),e=!0;if(t.find(":input.required").each(function(t){this.value.length?$(this).removeClass("js-is-invalid"):(e=!1,$(this).addClass("js-is-invalid"))}),e){var a,o="";$("body").hasClass("ja_JP")?(t.serializeArray().forEach(function(t){o+="&"+t.name+"="+t.value}),a="https://mystays.rwiths.net/r-withs/tfs0020a.do?"+o):(o="s=results",t.serializeArray().forEach(function(t){if("datein"==t.name||"dateout"==t.name){var e=new Date(t.value);t.value=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()}o+="&"+t.name+"="+t.value}),a="https://reservations.travelclick.com/"+property+"?"+o+"#/guestsandrooms"),window.open(a,"_blank").focus()}}),$(".js-toggle-menu").on("click",function(t){$(".js-mobile-menu").fadeIn()}),$(".js-close-mobile-menu").on("click",function(t){$(".js-mobile-menu").fadeOut()}),$(document).on("click",".js-book-now",function(t){t.preventDefault();var e,a,o,i,s,l,n,r,c,d=new Date(2018,1,1),h=new Date;d.setHours(0,0,0,0),h.setHours(0,0,0,0),h<d?(a=new Date(2018,1,1),o=new Date(2018,1,1)):(a=new Date,o=new Date),o.setDate(o.getDate()+1),i=a.getDate()<10?"0"+a.getDate():a.getDate(),l=a.getMonth()+1<10?"0"+(l=a.getMonth()+1):a.getMonth()+1,s=o.getDate()<10?"0"+o.getDate():o.getDate(),n=o.getMonth()+1<10?"0"+(n=o.getMonth()+1):o.getMonth()+1,"en_GB"===locale?(r=l+"/"+i+"/"+a.getFullYear(),c=n+"/"+s+"/"+o.getFullYear(),$(t.target).parents("li").data("room")?e="https://reservations.travelclick.com/"+property+"?hotelid="+property+"&datein="+r+"&dateout="+c+"&rooms=1&adults=2&children=0&roomtypeid="+$(t.target).parents("li").data("room")+"#/accommodation/room":$(t.target).parents("li").data("hotel")&&(e="https://www.book-secure.com/index.php?s=results&property="+$(t.target).parents("li").data("hotel")+"&arrival="+r+"&departure="+c+"&adults1=2&children1=0&children2=0&rooms=1&locale="+locale+"&currency=JPY")):"ja_JP"===locale&&(r=a.getFullYear()+"-"+l+"-"+i,c=o.getFullYear()+"-"+n+"-"+s,$(t.target).parents("li").data("name")?e="https://mystays.rwiths.net/r-withs/tfs0020a.do?&hotelNo="+property+"&ciDateY="+a.getFullYear()+"&ciDateM="+l+"&ciDateD="+i+"&coDateY="+o.getFullYear()+"&coDateM="+n+"&coDateD="+s+"&otona=2&s1=0&room=1":$(t.target).parents("li").data("hotel")&&(e="https://mystays.rwiths.net/r-withs/tfs0020a.do?&hotelNo="+$(t.target).parents("li").data("hotel")+"&ciDateY="+a.getFullYear()+"&ciDateM="+l+"&ciDateD="+i+"&coDateY="+o.getFullYear()+"&coDateM="+n+"&coDateD="+s+"&otona=2&s1=0&room=1")),window.open(e,"_blank").focus()}),$(document).keyup(function(t){27==t.keyCode&&($(".js-datepicker-modal").hasClass("hidden")||($(".js-datepicker-modal").addClass("hidden"),$("#checkIn").removeClass("js-datepicker-highlight"),$("#checkOut").removeClass("js-datepicker-highlight")))}),$(document).click(function(t){$(t.target).hasClass("js-datepicker-modal")||$(t.target).parents().hasClass("js-datepicker-modal")||$(t.target).parents().hasClass("ui-datepicker-header")||$(t.target).hasClass("js-datepicker")||($(".js-datepicker-modal").addClass("hidden"),$("#checkIn").removeClass("js-datepicker-highlight"),$("#checkOut").removeClass("js-datepicker-highlight"))}),$(".fancybox-thumb").fancybox({prevEffect:"none",nextEffect:"none",helpers:{title:{type:"outside"},thumbs:{width:40,height:40}}}),getReviews("#shinsaibashiEast","487c3a95-0204-4b24-b3d8-07bb42db12fc"),getReviews("#shinsaibashi","b5c6981a-016b-436e-95a6-85041532bdcb"),$.ajax({url:"https://api.trustyou.com/hotels/93ed65c2-4b3f-4101-a7a0-d149aedf852e/trust_score.html?embedded=true&lang=en&size=m",success:function(t){$("#guide-logo").append(t)}}),$(document).ready(init);